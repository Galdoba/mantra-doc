---
updated_at: 2026-02-12T16:30:31.431+10:00
---
## Уровень логирования ERROR: регистрация сбоев и исключений

**ERROR** ({{ERROR|ERROR}}) — это уровень логирования, предназначенный для записи событий, представляющих собой ошибки выполнения, исключительные ситуации или сбои, которые нарушают корректное выполнение отдельной операции, но не приводят к полной остановке приложения. Сообщения уровня ERROR сигнализируют о том, что система не смогла обработать запрос, выполнить команду или сохранить данные, однако продолжает функционировать для остальных операций.

В иерархии [[Log Level|уровней логирования]] ERROR расположен выше [[WARN|WARN]] и ниже [[FATAL|FATAL]] (если используется): при пороге ERROR записываются все сообщения этого уровня и выше, а предупреждения и информационные сообщения игнорируются.

### Назначение
Применение уровня ERROR обеспечивает обнаружение и реагирование на сбои в работе приложения:

*   **Сигнализация об инцидентах**. ERROR-сообщения являются основным источником для систем [[Alerting|оповещения]] (alerting), инициируя немедленное реагирование дежурных инженеров.
*   **Фиксация исключений ([[Exception|exception]])**. Запись стека вызовов, типа исключения и сопутствующего контекста для последующего анализа первопричин ([[Root Cause Analysis|root cause analysis]]).
*   **Определение границ отказоустойчивости**. ERROR указывает, что операция не выполнена, но система осталась работоспособной; это отличает обработанные ошибки от фатальных сбоев.
*   **Метрики качества обслуживания ([[Service Level Indicator|SLI]])**. Частота возникновения ERROR является ключевым показателем надёжности системы и используется для расчёта [[Service Level Objective|SLO]] и [[Service Level Agreement|SLA]].
*   **Аудит и расследование**. ERROR-логи предоставляют хронологию сбоев, необходимую для посмертного анализа ([[Post-Mortem|post-mortem]]) и предотвращения повторных инцидентов.

### Ограничения
Применение уровня ERROR сопряжено с рядом практических сложностей:

1.  **Субъективность классификации**. Не всегда очевидно, следует ли считать невыполнение операции ERROR или достаточно WARN. Например, отклонение запроса из-за невалидных данных клиента может трактоваться по-разному.
2.  **Избыточность и дублирование**. В распределённых системах одна и та же ошибка может быть залогирована на нескольких уровнях (в сервисе-источнике, в шлюзе, в клиенте), что приводит к «шумному» алертингу и затрудняет агрегацию.
3.  **Недостаточный контекст**. Часто ERROR-сообщение содержит только стек-трейс, но не включает идентификатор запроса, состояние агрегата или входные параметры, без чего диагностика становится крайне затруднительной.
4.  **Влияние на производительность**. Генерация детального стека-трейса и сериализация контекста требуют значительных вычислительных ресурсов, особенно в условиях интенсивных сбоев (например, при атаке или массовом отказе внешнего сервиса).
5.  **Риск «усталости от оповещений» ([[Alert Fatigue|alert fatigue]])**. Чрезмерное количество ERROR-сообщений, особенно не требующих немедленного вмешательства, приводит к игнорированию критических сигналов.

### Сложившиеся практики
Индустрия выработала устойчивый набор рекомендаций по эффективному использованию уровня ERROR:

1.  **Чёткие критерии классификации**. ERROR используется исключительно для ситуаций, когда:
    *   операция не может быть завершена в соответствии с бизнес-требованиями;
    *   требуется вмешательство разработчика или администратора для устранения причины;
    *   возникает необработанное исключение, достигшее границы системы.
    Временные сбои, успешно устранённые механизмами повторных попыток, логируются как WARN, а не ERROR.

2.  **Богатый контекст ([[Structured Logging|structured logging]])**. Каждое ERROR-сообщение включает машиночитаемые поля:
    *   уникальный идентификатор ошибки ([[Error Code|error code]]);
    *   тип исключения и сообщение;
    *   стек-трейс (в структурированном формате, например, массив строк);
    *   идентификатор корреляции ([[Correlation ID|correlation id]]);
    *   идентификатор агрегата или запроса;
    *   версия сервиса и среда выполнения.

3.  **Централизованный сбор и агрегация ([[Centralized Logging|centralized logging]])**. ERROR-логи направляются в единую систему (Elasticsearch, Loki, Splunk), где выполняется группировка по типу ошибки и подсчёт частоты. Это позволяет выявлять массовые сбои и тренды.

4.  **Управление оповещениями ([[Incident Management|incident management]])**. Алерты генерируются не на каждое ERROR-сообщение, а на основе агрегированных метрик:
    *   превышение порога частоты ошибок за временной интервал;
    *   появление нового, ранее не встречавшегося типа ошибки;
    *   недоступность критического сценария (например, оформление заказа).
    Это минимизирует ложные срабатывания.

5.  **Изоляция критического пути ([[Critical Path|critical path]])**. Для высоконагруженных систем ERROR-логи разделяются на категории: ошибки на критическом пути выполнения (требуют немедленного алерта) и ошибки во второстепенных операциях (регистрируются, но не вызывают оповещений).

6.  **Идемпотентность логирования**. При реализации повторных попыток повторное возникновение одной и той же ошибки не должно порождать новые ERROR-сообщения; достаточно одного сообщения с счётчиком повторений.

7.  **Маскирование чувствительных данных**. Из ERROR-логов автоматически удаляются пароли, токены, персональные данные и иная конфиденциальная информация, которая могла попасть в контекст исключения.

8.  **Документирование кодов ошибок**. Каждый уникальный код ошибки сопровождается описанием в базе знаний, содержащим вероятные причины, шаги диагностики и способы устранения. Это ускоряет расследование инцидентов.

9.  **Тестирование обработки ошибок**. В тестовых сценариях принудительно генерируются ERROR-ситуации для проверки корректности логирования, сохранения контекста и срабатывания оповещений.

10. **Регулярный анализ и профилактика**. Периодический обзор накопленных ERROR-логов позволяет выявить повторяющиеся ошибки, неоптимальные обработчики исключений и потенциальные улучшения устойчивости.

Таким образом, уровень ERROR является важнейшим источником информации об отказах системы, но его эффективность напрямую зависит от дисциплины классификации, полноты контекста и зрелости процессов управления инцидентами. При правильном применении ERROR-логи превращаются из простого журнала сбоев в основу проактивного повышения надёжности и наблюдаемости распределённых приложений.