---
updated_at: 2025-12-15T16:10:34.466+10:00
---
Паттерн «События как источник данных» (Event Sourcing) вводит в модель данных фактор времени. Вместо схемы, отражающей текущее состояние агрегатов, система, в которой источником текущего состояния являются события [[Domain Event]], сохраняет события, фиксирующие каждое изменение в жизненном цикле агрегата. 

Cостояние клиента можно легко спроецировать по этим событиям предметной области. Нужно всего лишь последовательно применить простую логику преобразования к каждому событию. Итерация по событиям агрегата и их последовательная передача в соответствующий переопределенный метод Apply создаст точно такое же представление состояния. Появляется возможность «путешествия во времени»: обращаясь только лишь к соответствующим событиям, можно спроецировать состояние сущности в любой момент его жизненного цикла.

Чтобы паттерн «События как источник данных» работал, все изменения состояния объекта должны быть представлены и сохранены как события.

Этот паттерн подходит для тех случаев, когда крайне важно иметь глубокое представление о данных системы, например для анализа и оптимизации, или же в силу требований закона о ведении журнала аудита.

*По своей сути, паттерн «События как источник данных» не является чем-то новым. Финансовая индустрия использует события для представления изменений в бухгалтерском реестре. Реестр — это журнал, предназначенный только для добавления записей, в котором документируются транзакции. Текущее состояние (например, баланс счета) всегда можно вывести путем «проецирования» записей реестра.*

Сценарий, по которому проводится каждая операция с агрегатом, основанным на событиях, имеет следующий вид:
- Загрузка событий предметной области агрегата.
- Воссоздание состояния — проецирование событий в представление состояния, которое может быть использовано для принятия бизнес-решений.
- Выполнение команды бизнес-логики агрегата и, следовательно, порождение новых событий предметной области.
- Фиксация новых событий предметной области в хранилище событий (event store).
