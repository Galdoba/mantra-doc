---
updated_at: 2026-02-11T12:22:37.076+10:00
tags:
  - logging
  - personal_development
---
Библеотека реализующая [[Structured Logger|структурированный логгер]].

# Замысел
Библиотека должна иметь реализацию самого логера и инструмента для чтения/анализа её логов в удобном для пользователя и сторонних программ виде. 
## Компоненты:
### Logger
Пакет реализующий запись сообщений.
Требования:
- Стандартные уровни логирования
- Обфускация чувствительных данных
- Возможность реализовать и поддерживать кастомный уровень логирования.
- Хранение сообщений в [[Serialization|json]] формате.
- Механизм обратной связи через генерацию событий, которые можно подключить к EventBus
- возможность настройки поведения через структуру конфигурации.
- Множественный хендлер (обработка одного сообщения 2-мя и более способами)
- Работа в отдельной рутине, для избежания блокировки программы.

### LogEntry (Запись в журнал)
Структура которая сериализуется и уходит в журнал. Её можно достать из журнала и, например с помощью форматера, красиво вывести на экран. Следует разделить структуру на рабочую часть, где проходят манипуляции (logEntry) и LogEntryDTO - которое в неизменяймом состоянии попадает в журнал.

### Formatter (Чтение из журнала)
реализует представление LogEntryDTO в нужный/удобный для чтения формат. Должна иметься возможность подключить внешний форматтер, через интерфейс.

### Reader (Чтение из журнала)
реализует поиск, сортировку и чтение LogEntryDTO. Должна иметься возможность подключить внешний форматтер, через интерфейс.


## Вызов логера.
1. Пакет должен иметь простой, дефолтный глобальный логер.
2. Работа со стандартными уровнями должна вестись простыми функциями. Например `gslog.Info("message recived", "user", "Vasya","age", 42)`
3. кастомные уровни должны вызываться отдельной функцией: `gslog.Log(gslog.Message("password accepted", "password", "admin").WithLevel(levelNotice).Obfuscate("password"))`
4. Пользователь должен манипулировать с сообщениями, но не должен видеть внутреннюю структуру до её попадания в журнал.

# TODO
- [ ] инструмент для чтения логов
	- [ ] реализовать авто определение формата сериализации
- [ ] разные форматы сериализации EntryDTO
- [+] Formatter
	- [ ] инструменты создания кастомного Formatter
- [ ] инструменты создания кастомного Level

# Реализовано
## logger
структура принимающая/обрабатывающая сообщения

## logEntry
структура представляющая собой запись в журнале в её состоянии ДО записи. после применения опций преобразуется в EntryDTO и записывается в журнал.

## EntryDTO
структура сохраняющаяся в журнале. Валидна для [[Serialization|сериализации]]. Именно она будет читаться инструментом для чтения.

## Formatter
Интерфейс представления EntryDTO в текст. 
Реализован дефолтный вариант.

## Level
Структура представляющая собой уровень записи. Имеет лейбл (то что записывается) и важность (для иерархического сравнения).
Дефолтный вариант: 6 стандартных уровней.

## Configuration
Структура передающая параметры нового кастомного логгера.
полностью экспортируемая, поддается сериализации. 
Доступна функция `DefaultConfiguration() Configuration`

# Options
## global
- `strict`, `s` - останавливаемся при любой ошибке