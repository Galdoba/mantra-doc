---
updated_at: 2026-02-12T13:13:48.096+10:00
---
**Переменные окружения** — это динамические именованные значения, хранящиеся в адресном пространстве [[Operating System|операционной системы]] и доступные запущенным в ней процессам. Они представляют собой пары «ключ-значение», передаваемые [[Process|процессу]] при его создании от родительского процесса или системы и остающиеся неизменными на протяжении его жизненного цикла.

### Назначение
Основная роль переменных окружения заключается в параметризации выполнения программ в зависимости от контекста, в котором они запущены. Это позволяет:
*   адаптировать поведение приложения к различным средам (локальная машина разработчика, тестовый стенд, продакшн-кластер) без изменения исходного кода и повторной сборки;
*   изолировать чувствительную информацию ([[Secret|секреты]], токены) от репозитория и кодовой базы;
*   централизованно задавать политики и пути для системных утилит (например, `PATH`, `TEMP`);
*   организовывать взаимодействие между процессами в контейнерных средах и системах оркестрации.

В современной разработке переменные окружения стали стандартным механизмом поставки конфигурации, что закреплено, в частности, в манифесте [[Twelve-Factor App|Двенадцать факторов]].

### Ограничения
Несмотря на широкое распространение, переменные окружения обладают рядом ограничений, которые необходимо учитывать:
1.  **Типизация и структура**. Переменные окружения передаются исключительно как строки. Это требует от приложения явного парсинга чисел, булевых значений, JSON-объектов и т.п., а также обработки ошибок преобразования. Отсутствие встроенной схемы валидации повышает вероятность ошибок времени выполнения.
2.  **Отсутствие иерархии**. Переменные окружения плохо приспособлены для представления сложных вложенных структур данных без дополнительных соглашений о сериализации (например, `DATABASE__HOST`, `DATABASE__PORT`).
3.  **Область видимости и наследование**. Значения задаются для конкретного процесса и не могут быть динамически изменены во время его работы (без внешних манипуляций). Дочерние процессы наследуют окружение родителя, но не наоборот.
4.  **Сложность управления на клиенте**. Для десктопных и мобильных приложений, работающих вне контролируемой серверной инфраструктуры, использование переменных окружения менее характерно; там применяются конфигурационные файлы или облачные хранилища настроек.

### Сложившиеся практики
За десятилетия применения индустрия выработала устоявшиеся подходы к работе с переменными окружения:

1.  **Единственный источник для окружения**. В серверных приложениях рекомендуется хранить всю конфигурацию, различающуюся между средами, исключительно в переменных окружения. Это гарантирует, что один и тот же собранный артефакт можно развернуть где угодно, просто изменив значения переменных.

2.  **Значения по умолчанию**. Код должен корректно работать при отсутствии явно заданной переменной, используя разумные [[Default Value|значения по умолчанию]] или выбрасывая понятные исключения с описанием ожидаемого имени. Это упрощает локальную разработку и тестирование.

3.  **Управление секретами**. Для работы с паролями и ключами поверх стандартных переменных окружения применяются инструменты вроде HashiCorp Vault, sealed-секреты в Kubernetes или специализированные сервисы, которые временно внедряют значения в окружение контейнера. Сами файлы `.env` не должны попадать в репозитории; для них используется `.gitignore`, а в коде распространяются только шаблоны (`.env.example`).

4.  **Загрузка из файлов в разработке**. Для удобства локальной работы широко применяется подход [[Dotenv|Dotenv]]: библиотека загружает переменные из файла `.env` в окружение процесса при запуске. Это позволяет разработчику хранить наборы настроек изолированно для разных проектов, не загрязняя глобальное окружение системы.

5.  **Префиксы и пространства имён**. Во избежание конфликтов с системными переменными и переменными других приложений используются префиксы, отражающие имя проекта или компонента (например, `MYAPP_DB_URL`). Для композитных значений (массивов, хешей) применяются соглашения о разделителях (например, двойное подчёркивание для вложенности: `MYAPP_REDIS__HOST`).

6.  **Валидация и схема**. На этапе инициализации приложения выполняется проверка наличия обязательных переменных и соответствия их значений ожидаемому формату (часто с использованием библиотек для декларативного описания схем конфигурации).

Таким образом, переменные окружения являются базовым, платформонезависимым механизмом передачи конфигурации, который при соблюдении дисциплины именования, обработки ошибок и изоляции секретов обеспечивает надёжное и гибкое управление поведением приложений в различных средах исполнения.