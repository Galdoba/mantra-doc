---
updated_at: 2026-02-13T12:13:05.964+10:00
---
## Метод Create: операция создания новой записи

**Create** ({{Create|create}}) — это операция, отвечающая за создание и сохранение новой записи в постоянном хранилище данных. В рамках концепции [[CRUD|CRUD]] Create является единственной операцией, которая вводит в систему ранее не существовавшую сущность, наделяя её уникальным [[Identifier|идентификатором]] и начальным состоянием.

### Назначение
Операция Create обеспечивает базовую функциональность ввода новых данных в систему:

*   **Фиксация новых фактов**. Регистрация клиентов, оформление заказов, добавление товаров — все эти сценарии начинаются с создания записи.
*   **Генерация идентификатора**. Присвоение уникального, системно-значимого ключа, по которому запись впоследствии будет идентифицироваться.
*   **Первичная валидация**. Проверка входящих данных на соответствие обязательным полям, типам и базовым ограничениям до сохранения.
*   **Инициализация состояния**. Установка значений по умолчанию, временных меток создания, аудиторской информации (автор, источник).
*   **Основа для последующих операций**. Созданная запись становится целью для операций чтения, обновления и удаления на протяжении своего жизненного цикла.

### Ограничения
Применение операции Create в чистом CRUD-подходе имеет существенные ограничения:

1.  **Отсутствие бизнес-логики**. Create оперирует полями записи, но не моделирует сложные бизнес-процессы, которые могут требовать согласованного создания нескольких взаимосвязанных объектов или проверки инвариантов.
2.  **Невыразительность семантики**. Операция не различает контекст создания: создание заказа, создание черновика заказа и создание копии заказа — всё это выражается одинаково, хотя бизнес-правила могут существенно различаться.
3.  **Риск неполной инициализации**. При прямом отображении полей формы на структуру записи возможно сохранение объекта в некорректном, незавершённом состоянии.
4.  **Проблемы с распределённой генерацией идентификаторов**. В распределённых системах синхронная генерация уникальных идентификаторов (например, автоинкремент) создаёт узкие места и усложняет масштабирование.
5.  **Конфликты при параллельном создании**. Одновременные попытки создания записей с одинаковыми естественными ключами могут приводить к нарушению целостности.

### Сложившиеся практики
Индустрия выработала устойчивый набор подходов к реализации операции Create:

1.  **Использование [[Repository|репозитория]] для инкапсуляции создания**. Интерфейс репозитория предоставляет метод `add` или `save`, принимающий полностью сконструированный агрегат. Это отделяет логику создания от деталей хранения.

2.  **[[Factory|Фабрики]] для сложного создания**. Когда создание агрегата требует сложной инициализации, композиции объектов или выполнения бизнес-правил, применяется фабричный метод или отдельный класс-фабрика. Фабрика возвращает корректно инициализированный объект, готовый к передаче в репозиторий.

3.  **Генерация идентификатора на стороне клиента**. Для обеспечения масштабируемости и устранения зависимости от базы данных идентификаторы генерируются на стороне приложения ([[UUID|UUID]], [[Snowflake ID|Snowflake]], [[ULID|ULID]]). Это позволяет создавать объект с полной идентичностью до обращения к хранилищу.

4.  **Использование [[DTO|DTO]] для приёма данных**. На вход операции Create принимается объект передачи данных, содержащий только необходимые поля. Внутреннее представление (доменная модель) создаётся на основе DTO с применением валидации и преобразования.

5.  **Валидация на нескольких уровнях**. Синтаксическая проверка выполняется на уровне DTO (аннотации, атрибуты), семантическая — на уровне фабрики или конструктора агрегата. Это гарантирует, что недопустимые объекты никогда не будут созданы.

6.  **[[Idempotency|Идемпотентность]] создания**. В распределённых системах операция Create часто проектируется идемпотентной с использованием ключа идемпотентности, предоставляемого клиентом. При повторной отправке запроса с тем же ключом возвращается ранее созданный объект без дублирования.

7.  **Асинхронное создание**. Для длительных операций создания (генерация отчётов, обработка медиафайлов) применяется асинхронный паттерн: запрос немедленно возвращает подтверждение с идентификатором задачи, а результат создаётся в фоновом процессе.

8.  **[[Soft Create|«Мягкое» создание]] и черновики**. В некоторых предметных областях объект может проходить через промежуточные состояния (черновик, ожидание подтверждения). Операция Create в таких случаях создаёт объект в начальном состоянии, а не в финальном.

9.  **Атомарность создания связанных объектов**. Если создание одной записи неразрывно связано с созданием других, используется транзакционный подход или механизмы согласованности в конечном счёте ([[Saga|саги]], [[Process Manager|менеджеры процессов]]).

10. **Документирование контракта создания**. В API явно специфицируются обязательные и опциональные поля, формат данных, возможные коды ошибок и поведение при конфликтах.

Таким образом, операция Create, будучи базовым строительным блоком CRUD, в промышленных системах редко существует в примитивной форме «вставка записи в таблицу». Она обрастает дополнительными уровнями валидации, фабричной логикой, стратегиями генерации идентификаторов и механизмами идемпотентности. Это превращает Create из простой технической операции в полноценный элемент предметно-ориентированного дизайна, обеспечивающий целостность бизнес-правил с момента рождения объекта.