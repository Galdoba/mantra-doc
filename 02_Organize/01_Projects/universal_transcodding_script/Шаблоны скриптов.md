---
updated_at: 2025-12-17T12:29:28.355+10:00
tags:
  - universal_transcoding_script
  - template
---

# Trailer
```bash
#!/bin/bash

# Основные параметры обработки
PRIORITY=8                                         # Приоритет обработки
INPUT_FILE="_____________"                         # Имя исходного файла
OUTPUT_BASE="__________TRL"                        # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                              # Суффикс для версии файла

# Базовые пути
HOME_ROOT="/home/pemaltynov"                       # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                       # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                                # Общий подпуть для архивных путей

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                            # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                       # Знаменатель для atempo (25/__)
AUDIO_LANGUAGE_SUFFIX="AUDIORUS__"                 # Суффикс для идентификации аудиодорожки

# Параметры видео
VIDEO_FRAMERATE=25                                 # Частота кадров видео (fps)
VIDEO_SCALE_WIDTH=1920                             # Ширина видео после масштабирования
VIDEO_SCALE_HEIGHT=-2                              # Высота видео (авто с сохранением пропорций)
VIDEO_SAR="1/1"                                    # Соотношение сторон пикселей (SAR)
VIDEO_UNSHARP="3:3:0.3:3:3:0"                      # Параметры повышения резкости
VIDEO_PAD_WIDTH=1920                               # Ширина видео после паддинга
VIDEO_PAD_HEIGHT=1080                              # Высота видео после паддинга
VIDEO_PAD_X=-1                                     # Положение X для паддинга (авто)
VIDEO_PAD_Y=-1                                     # Положение Y для паддинга (авто)

# Параметры кодирования
VIDEO_CODEC_OPTIONS="@crf10"                       # Параметры кодирования видео
AUDIO_CODEC_OPTIONS="@alac0"                       # Параметры кодирования аудио

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
NOTIFICATION_DIR="${INPUT_DIR}/notifications"
SCRIPT_ARCHIVE_DIR="${INPUT_DIR}/_DONE/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/EDIT/@trailers_temp"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/IN/@TRAILERS"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"
FULL_NOTIFICATION_PATH="${NOTIFICATION_DIR}/${OUTPUT_BASE}.done"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=${VIDEO_FRAMERATE}/(${AUDIO_TEMPO_DENOMINATOR})"
VIDEO_FILTER="scale=${VIDEO_SCALE_WIDTH}:${VIDEO_SCALE_HEIGHT},setsar=${VIDEO_SAR},unsharp=${VIDEO_UNSHARP},pad=${VIDEO_PAD_WIDTH}:${VIDEO_PAD_HEIGHT}:${VIDEO_PAD_X}:${VIDEO_PAD_Y}"

# Формирование имен выходных файлов
VIDEO_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}.mp4"
AUDIO_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX}.m4a"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Очистка экрана и перемещение входного файла
clear
mv "${INPUT_DIR}/${INPUT_FILE}" "${PROGRESS_DIR}/"

# Обработка медиафайла
fflite -r ${VIDEO_FRAMERATE} -i "${PROGRESS_DIR}/${INPUT_FILE}" \
  -filter_complex "[0:v:0]${VIDEO_FILTER}[video]; [0:a:0]${AUDIO_FILTER}[audio]" \
  -map "[video]" ${VIDEO_CODEC_OPTIONS} "${VIDEO_OUTPUT}" \
  -map "[audio]" ${AUDIO_CODEC_OPTIONS} "${AUDIO_OUTPUT}" && \
  
# Создание файла уведомления
echo "\\\\nas\\root\\EDIT\\@trailers_temp\\${OUTPUT_BASE}${REVISION_SUFFIX}" > "${FULL_NOTIFICATION_PATH}" && \
  
# Перемещение обработанного файла в архив
mv "${PROGRESS_DIR}/${INPUT_FILE}" "${ARCHIVE_OUTPUT_PATH}" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Film 1 audio
```bash
#!/bin/bash

# Основные параметры обработки
PRIORITY=5                                         # Приоритет обработки
INPUT_FILE="_____________"                         # Имя исходного файла
OUTPUT_BASE="__________"                           # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                              # Суффикс для версии файла

# Базовые пути
HOME_ROOT="/home/pemaltynov"                       # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                       # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                                # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/_______"                        # Подпуть для редактирования
ARCHIVE_SUBPATH="IN/_______"                       # Подпуть для архивации

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                            # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                       # Знаменатель для atempo (25/__)
AUDIO_LANGUAGE_SUFFIX="AUDIORUS__"                 # Суффикс для идентификации аудиодорожки

# Параметры видео
VIDEO_FRAMERATE=25                                 # Частота кадров видео (fps)
VIDEO_SCALE_DIVISOR=2                              # Делитель масштаба для proxy видео
VIDEO_SAR_FACTOR=2                                 # Множитель для SAR proxy видео

# Параметры кодирования HD видео
VIDEO_HD_CODEC="libx264"                           # Кодек для HD видео
VIDEO_HD_PRESET="medium"                           # Пресет кодирования HD
VIDEO_HD_CRF=16                                    # CRF значение для HD
VIDEO_HD_PIX_FMT="yuv420p"                         # Пиксельный формат HD
VIDEO_HD_GOP_SIZE=0                                # Размер GOP (0 - только ключевые кадры)

# Параметры кодирования proxy видео
VIDEO_PROXY_CODEC="libx264"                        # Кодек для proxy видео
VIDEO_PROXY_PRESET="superfast"                     # Пресет кодирования proxy
VIDEO_PROXY_PIX_FMT="yuv420p"                      # Пиксельный формат proxy
VIDEO_PROXY_BITRATE="2000k"                        # Битрейт для proxy видео
VIDEO_PROXY_MAXRATE="2000k"                        # Максимальный битрейт proxy
VIDEO_PROXY_INTERLACED=1                           # Флаг чересстрочности proxy

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                              # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                       # Уровень сжатия ALAC

# Параметры кодирования proxy аудио
AUDIO_PROXY_CODEC="ac3"                            # Кодек для proxy аудио
AUDIO_PROXY_BITRATE="128k"                         # Битрейт для proxy аудио

# Таймауты и задержки
ARCHIVE_DELAY="10 hours"                           # Задержка перед архивацией

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
NOTIFICATION_DIR="${INPUT_DIR}/notifications"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"
FULL_NOTIFICATION_PATH="${NOTIFICATION_DIR}/${OUTPUT_BASE}.done"
FULL_DONE_PATH="${DONE_DIR}"
READY_FILE_PATH="${FULL_EDIT_PATH}/${OUTPUT_BASE}.ready"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=${VIDEO_FRAMERATE}/(${AUDIO_TEMPO_DENOMINATOR})"
VIDEO_FILTER="[0:v:0]split=2[vidHD][inProxy]; [inProxy]scale=iw/${VIDEO_SCALE_DIVISOR}:ih, setsar=(1/1)*${VIDEO_SAR_FACTOR}[vidHD_pr]; [0:a:0]${AUDIO_FILTER}[arus_in]; [arus_in]asplit=2[arus][arus_pr]"

# Формирование имен выходных файлов
VIDEO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}.mp4"
VIDEO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_proxy.mp4"
AUDIO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX}.m4a"
AUDIO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX}_proxy.ac3"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Очистка экрана и перемещение входного файла
clear
mv "${INPUT_DIR}/${INPUT_FILE}" "${PROGRESS_DIR}/"

# Обработка медиафайла
fflite -r ${VIDEO_FRAMERATE} -i "${PROGRESS_DIR}/${INPUT_FILE}" \
  -filter_complex "${VIDEO_FILTER}" \
  -map "[vidHD]" -c:v ${VIDEO_HD_CODEC} -preset ${VIDEO_HD_PRESET} -crf ${VIDEO_HD_CRF} -pix_fmt ${VIDEO_HD_PIX_FMT} -g ${VIDEO_HD_GOP_SIZE} -map_metadata -1 -map_chapters -1 "${VIDEO_HD_OUTPUT}" \
  -map "[vidHD_pr]" -c:v ${VIDEO_PROXY_CODEC} -x264opts interlaced=${VIDEO_PROXY_INTERLACED} -preset ${VIDEO_PROXY_PRESET} -pix_fmt ${VIDEO_PROXY_PIX_FMT} -b:v ${VIDEO_PROXY_BITRATE} -maxrate ${VIDEO_PROXY_MAXRATE} -map_metadata -1 -map_chapters -1 "${VIDEO_PROXY_OUTPUT}" \
  -map "[arus]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_OUTPUT}" \
  -map "[arus_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_OUTPUT}" && \
  
# Создание файла готовности
touch "${READY_FILE_PATH}" && \
  
# Создание файла уведомления
echo "${EDIT_SUBPATH}/${OUTPUT_BASE}.ready" > "${FULL_NOTIFICATION_PATH}" && \
  
# Перемещение обработанного файла в временную директорию
mv "${PROGRESS_DIR}/${INPUT_FILE}" "${FULL_DONE_PATH}/" && \
  
# Отложенное перемещение файла в архив
at now + ${ARCHIVE_DELAY} <<< "mv ${FULL_DONE_PATH}/${INPUT_FILE} ${ARCHIVE_OUTPUT_PATH}" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Film 2 Audio
```bash

#!/bin/bash

# Основные параметры обработки
PRIORITY=5                                         # Приоритет обработки
INPUT_FILE="__________"                            # Имя исходного файла
OUTPUT_BASE="__________"                           # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                              # Суффикс для версии файла

# Базовые пути
HOME_ROOT="/home/pemaltynov"                       # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                       # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                                # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/_______"                        # Подпуть для редактирования
ARCHIVE_SUBPATH="IN/_______"                       # Подпуть для архивации

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                            # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                       # Знаменатель для atempo (25/__)
AUDIO_LANGUAGE_SUFFIX_RUS="AUDIORUS__"             # Суффикс для русской аудиодорожки
AUDIO_LANGUAGE_SUFFIX_ENG="AUDIOENG__"             # Суффикс для английской аудиодорожки
AUDIO_TRACK_COUNT=2                                # Количество аудиодорожок

# Параметры видео
VIDEO_FRAMERATE=25                                 # Частота кадров видео (fps)
VIDEO_SCALE_DIVISOR=2                              # Делитель масштаба для proxy видео
VIDEO_SAR_FACTOR=2                                 # Множитель для SAR proxy видео

# Параметры кодирования HD видео
VIDEO_HD_CODEC="libx264"                           # Кодек для HD видео
VIDEO_HD_PRESET="medium"                           # Пресет кодирования HD
VIDEO_HD_CRF=16                                    # CRF значение для HD
VIDEO_HD_PIX_FMT="yuv420p"                         # Пиксельный формат HD
VIDEO_HD_GOP_SIZE=0                                # Размер GOP (0 - только ключевые кадры)

# Параметры кодирования proxy видео
VIDEO_PROXY_CODEC="libx264"                        # Кодек для proxy видео
VIDEO_PROXY_PRESET="superfast"                     # Пресет кодирования proxy
VIDEO_PROXY_PIX_FMT="yuv420p"                      # Пиксельный формат proxy
VIDEO_PROXY_BITRATE="2000k"                        # Битрейт для proxy видео
VIDEO_PROXY_MAXRATE="2000k"                        # Максимальный битрейт proxy
VIDEO_PROXY_INTERLACED=1                           # Флаг чересстрочности proxy

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                              # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                       # Уровень сжатия ALAC

# Параметры кодирования proxy аудио
AUDIO_PROXY_CODEC="ac3"                            # Кодек для proxy аудио
AUDIO_PROXY_BITRATE="128k"                         # Битрейт для proxy аудио

# Таймауты и задержки
ARCHIVE_DELAY="10 hours"                           # Задержка перед архивацией

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
NOTIFICATION_DIR="${INPUT_DIR}/notifications"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"
FULL_NOTIFICATION_PATH="${NOTIFICATION_DIR}/${OUTPUT_BASE}.done"
FULL_DONE_PATH="${DONE_DIR}"
READY_FILE_PATH="${FULL_EDIT_PATH}/${OUTPUT_BASE}.ready"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=${VIDEO_FRAMERATE}/(${AUDIO_TEMPO_DENOMINATOR})"
VIDEO_FILTER="[0:v:0]split=2[vidHD][inProxy]; [inProxy]scale=iw/${VIDEO_SCALE_DIVISOR}:ih, setsar=(1/1)*${VIDEO_SAR_FACTOR}[vidHD_pr]; [0:a:0]${AUDIO_FILTER}[arus_in]; [arus_in]asplit=2[arus][arus_pr]; [0:a:1]${AUDIO_FILTER}[aeng_in]; [aeng_in]asplit=2[aeng][aeng_pr]"

# Формирование имен выходных файлов
VIDEO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}.mp4"
VIDEO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_proxy.mp4"
AUDIO_HD_RUS_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX_RUS}.m4a"
AUDIO_PROXY_RUS_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX_RUS}_proxy.ac3"
AUDIO_HD_ENG_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX_ENG}.m4a"
AUDIO_PROXY_ENG_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_${AUDIO_LANGUAGE_SUFFIX_ENG}_proxy.ac3"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Очистка экрана и перемещение входного файла
clear
mv "${INPUT_DIR}/${INPUT_FILE}" "${PROGRESS_DIR}/"

# Обработка медиафайла
fflite -r ${VIDEO_FRAMERATE} -i "${PROGRESS_DIR}/${INPUT_FILE}" \
  -filter_complex "${VIDEO_FILTER}" \
  -map "[vidHD]" -c:v ${VIDEO_HD_CODEC} -preset ${VIDEO_HD_PRESET} -crf ${VIDEO_HD_CRF} -pix_fmt ${VIDEO_HD_PIX_FMT} -g ${VIDEO_HD_GOP_SIZE} -map_metadata -1 -map_chapters -1 "${VIDEO_HD_OUTPUT}" \
  -map "[vidHD_pr]" -c:v ${VIDEO_PROXY_CODEC} -x264opts interlaced=${VIDEO_PROXY_INTERLACED} -preset ${VIDEO_PROXY_PRESET} -pix_fmt ${VIDEO_PROXY_PIX_FMT} -b:v ${VIDEO_PROXY_BITRATE} -maxrate ${VIDEO_PROXY_MAXRATE} -map_metadata -1 -map_chapters -1 "${VIDEO_PROXY_OUTPUT}" \
  -map "[arus]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_RUS_OUTPUT}" \
  -map "[arus_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_RUS_OUTPUT}" \
  -map "[aeng]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_ENG_OUTPUT}" \
  -map "[aeng_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_ENG_OUTPUT}" && \
  
# Создание файла готовности
touch "${READY_FILE_PATH}" && \
  
# Создание файла уведомления
echo "${EDIT_SUBPATH}/${OUTPUT_BASE}.ready" > "${FULL_NOTIFICATION_PATH}" && \
  
# Перемещение обработанного файла в временную директорию
mv "${PROGRESS_DIR}/${INPUT_FILE}" "${FULL_DONE_PATH}/" && \
  
# Отложенное перемещение файла в архив
at now + ${ARCHIVE_DELAY} <<< "mv ${FULL_DONE_PATH}/${INPUT_FILE} ${ARCHIVE_OUTPUT_PATH}" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Film with Hardsub

```bash

#!/bin/bash

# Основные параметры обработки
PRIORITY=5                                         # Приоритет обработки
INPUT_FILENAME="____________"                      # Имя исходного файла
OUTPUT_BASE="____________"                         # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                              # Суффикс для версии файла
SUBTITLE_FILENAME="____________"                   # Имя файла субтитров

# Базовые пути
HOME_ROOT="/home/pemaltynov"                       # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                       # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                                # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/____________"                   # Подпуть для редактирования
ARCHIVE_SUBPATH="IN/____________"                  # Подпуть для архивации

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                            # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                       # Знаменатель для atempo (25/__)
AUDIO_LANGUAGE_SUFFIX="_AUDIORUS__"                # Суффикс для идентификации аудиодорожки

# Параметры субтитров
SUBTITLE_ORIGINAL_SIZE="1920x1080"                 # Оригинальный размер видео для субтитров
SUBTITLE_FONT_NAME="Segoe UI"                      # Шрифт субтитров
SUBTITLE_FONT_SIZE="19.4"                          # Размер шрифта
SUBTITLE_PRIMARY_COLOR="&H00EBEBEB"                # Основной цвет текста
SUBTITLE_SECONDARY_COLOR="&H000000FF"              # Вторичный цвет
SUBTITLE_OUTLINE_COLOR="&H00000000"                # Цвет контура
SUBTITLE_BACK_COLOR="&H80000000"                   # Цвет фона
SUBTITLE_UNDERLINE=0                               # Подчеркивание (0 - нет, 1 - да)
SUBTITLE_STRIKEOUT=0                               # Зачеркивание (0 - нет, 1 - да)
SUBTITLE_SCALE_X=1                                 # Масштаб по X
SUBTITLE_SCALE_Y=1                                 # Масштаб по Y
SUBTITLE_SPACING=0                                 # Межсимвольный интервал
SUBTITLE_ANGLE=0                                   # Угол поворота
SUBTITLE_BORDER_STYLE=1                            # Стиль границы
SUBTITLE_OUTLINE=0.5                               # Толщина контура
SUBTITLE_SHADOW=0                                  # Тень
SUBTITLE_ALIGNMENT=2                               # Выравнивание (2 - по центру снизу)
SUBTITLE_MARGIN_LEFT=5                             # Левый отступ
SUBTITLE_MARGIN_RIGHT=5                            # Правый отступ
SUBTITLE_MARGIN_VERTICAL=40                        # Вертикальный отступ
SUBTITLE_ENCODING=1                                # Кодировка (1 - Unicode)

# Параметры видео
VIDEO_FRAMERATE=25                                 # Частота кадров видео (fps)
VIDEO_SCALE_DIVISOR=2                              # Делитель масштаба для proxy видео
VIDEO_SAR_FACTOR=2                                 # Множитель для SAR proxy видео

# Параметры кодирования HD видео
VIDEO_HD_CODEC="libx264"                           # Кодек для HD видео
VIDEO_HD_PRESET="medium"                           # Пресет кодирования HD
VIDEO_HD_CRF=16                                    # CRF значение для HD
VIDEO_HD_PIX_FMT="yuv420p"                         # Пиксельный формат HD
VIDEO_HD_GOP_SIZE=0                                # Размер GOP (0 - только ключевые кадры)

# Параметры кодирования proxy видео
VIDEO_PROXY_CODEC="libx264"                        # Кодек для proxy видео
VIDEO_PROXY_PRESET="superfast"                     # Пресет кодирования proxy
VIDEO_PROXY_PIX_FMT="yuv420p"                      # Пиксельный формат proxy
VIDEO_PROXY_BITRATE="2000k"                        # Битрейт для proxy видео
VIDEO_PROXY_MAXRATE="2000k"                        # Максимальный битрейт proxy
VIDEO_PROXY_INTERLACED=1                           # Флаг чересстрочности proxy

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                              # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                       # Уровень сжатия ALAC

# Параметры кодирования proxy аудио
AUDIO_PROXY_CODEC="ac3"                            # Кодек для proxy аудио
AUDIO_PROXY_BITRATE="128k"                         # Битрейт для proxy аудио

# Таймауты и задержки
ARCHIVE_DELAY="10 hours"                           # Задержка перед архивацией

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
NOTIFICATION_DIR="${INPUT_DIR}/notifications"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Составные файловые пути
INPUT_SOURCE_PATH="${INPUT_DIR}/${INPUT_FILENAME}"           # Полный путь к исходному файлу
INPUT_PROGRESS_PATH="${PROGRESS_DIR}/${INPUT_FILENAME}"      # Полный путь к файлу в обработке
SUBTITLE_FILE="${INPUT_DIR}/${SUBTITLE_FILENAME}"            # Полный путь к файлу субтитров

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"
FULL_NOTIFICATION_PATH="${NOTIFICATION_DIR}/${OUTPUT_BASE}.done"
FULL_DONE_PATH="${DONE_DIR}"
READY_FILE_PATH="${FULL_EDIT_PATH}/${OUTPUT_BASE}.ready"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=${VIDEO_FRAMERATE}/(${AUDIO_TEMPO_DENOMINATOR})"
SUBTITLE_FILTER="subtitles=filename=${SUBTITLE_FILE}:original_size=${SUBTITLE_ORIGINAL_SIZE}:force_style='FontName=${SUBTITLE_FONT_NAME},Fontsize=${SUBTITLE_FONT_SIZE},PrimaryColour='${SUBTITLE_PRIMARY_COLOR}',SecondaryColour='${SUBTITLE_SECONDARY_COLOR}',OutlineColour='${SUBTITLE_OUTLINE_COLOR}',BackColour='${SUBTITLE_BACK_COLOR}',Underline=${SUBTITLE_UNDERLINE},StrikeOut=${SUBTITLE_STRIKEOUT},ScaleX=${SUBTITLE_SCALE_X},ScaleY=${SUBTITLE_SCALE_Y},Spacing=${SUBTITLE_SPACING},Angle=${SUBTITLE_ANGLE},BorderStyle=${SUBTITLE_BORDER_STYLE},Outline=${SUBTITLE_OUTLINE},Shadow=${SUBTITLE_SHADOW},Alignment=${SUBTITLE_ALIGNMENT},MarginL=${SUBTITLE_MARGIN_LEFT},MarginR=${SUBTITLE_MARGIN_RIGHT},MarginV=${SUBTITLE_MARGIN_VERTICAL},Encoding=${SUBTITLE_ENCODING}',"
VIDEO_FILTER="${SUBTITLE_FILTER}split=2[vidHD][inProxy]; [inProxy]scale=iw/${VIDEO_SCALE_DIVISOR}:ih, setsar=(1/1)*${VIDEO_SAR_FACTOR}[vidHD_pr]; [0:a:0]${AUDIO_FILTER}[arus_in]; [arus_in]asplit=2[arus][arus_pr]"

# Формирование имен выходных файлов
VIDEO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}.mp4"
VIDEO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}_proxy.mp4"
AUDIO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}.m4a"
AUDIO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}_proxy.ac3"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Очистка экрана и перемещение входного файла
clear
mv "${INPUT_SOURCE_PATH}" "${PROGRESS_DIR}/"

# Обработка медиафайла
fflite -r ${VIDEO_FRAMERATE} -i "${INPUT_PROGRESS_PATH}" \
  -filter_complex "${VIDEO_FILTER}" \
  -map "[vidHD]" -c:v ${VIDEO_HD_CODEC} -preset ${VIDEO_HD_PRESET} -crf ${VIDEO_HD_CRF} -pix_fmt ${VIDEO_HD_PIX_FMT} -g ${VIDEO_HD_GOP_SIZE} -map_metadata -1 -map_chapters -1 "${VIDEO_HD_OUTPUT}" \
  -map "[vidHD_pr]" -c:v ${VIDEO_PROXY_CODEC} -x264opts interlaced=${VIDEO_PROXY_INTERLACED} -preset ${VIDEO_PROXY_PRESET} -pix_fmt ${VIDEO_PROXY_PIX_FMT} -b:v ${VIDEO_PROXY_BITRATE} -maxrate ${VIDEO_PROXY_MAXRATE} -map_metadata -1 -map_chapters -1 "${VIDEO_PROXY_OUTPUT}" \
  -map "[arus]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_OUTPUT}" \
  -map "[arus_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_OUTPUT}" && \
  
# Создание файла готовности
touch "${READY_FILE_PATH}" && \
  
# Создание файла уведомления
echo "${EDIT_SUBPATH}/${OUTPUT_BASE}.ready" > "${FULL_NOTIFICATION_PATH}" && \
  
# Перемещение обработанного файла в временную директорию
mv "${INPUT_PROGRESS_PATH}" "${FULL_DONE_PATH}/" && \
  
# Отложенное перемещение файла в архив
at now + ${ARCHIVE_DELAY} <<< "mv ${FULL_DONE_PATH}/${INPUT_FILENAME} ${ARCHIVE_OUTPUT_PATH}" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Audio: 6 mono to 5.1

```bash

#!/bin/bash

# Основные параметры обработки
PRIORITY=5                                         # Приоритет обработки
OUTPUT_BASE="______________"                       # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                              # Суффикс для версии файла
AUDIO_LANGUAGE_SUFFIX="_AUDIORUS__"                # Суффикс для идентификации аудиодорожки

# Базовые пути
HOME_ROOT="/home/pemaltynov"                       # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                       # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                                # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/_______"                        # Подпуть для редактирования
ARCHIVE_SUBPATH="IN/_______"                       # Подпуть для архивации

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                            # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                       # Знаменатель для atempo (25/__)
AUDIO_INPUT_COUNT=6                                # Количество входных аудиофайлов

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                              # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                       # Уровень сжатия ALAC

# Параметры кодирования proxy аудио
AUDIO_PROXY_CODEC="ac3"                            # Кодек для proxy аудио
AUDIO_PROXY_BITRATE="128k"                         # Битрейт для proxy аудио

# Имена моно-аудиофайлов (каналы 5.1)
AUDIO_CHANNEL_L="_____________.L.wav"              # Левый канал
AUDIO_CHANNEL_R="_____________.R.wav"              # Правый канал
AUDIO_CHANNEL_C="_____________.C.wav"              # Центральный канал
AUDIO_CHANNEL_LFE="_____________.Lfe.wav"          # Низкочастотный канал
AUDIO_CHANNEL_LS="_____________.Ls.wav"            # Левый тыловой канал
AUDIO_CHANNEL_RS="_____________.Rs.wav"            # Правый тыловой канал

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"

# Составные файловые пути для входных файлов
AUDIO_SOURCE_L="${INPUT_DIR}/${AUDIO_CHANNEL_L}"
AUDIO_SOURCE_R="${INPUT_DIR}/${AUDIO_CHANNEL_R}"
AUDIO_SOURCE_C="${INPUT_DIR}/${AUDIO_CHANNEL_C}"
AUDIO_SOURCE_LFE="${INPUT_DIR}/${AUDIO_CHANNEL_LFE}"
AUDIO_SOURCE_LS="${INPUT_DIR}/${AUDIO_CHANNEL_LS}"
AUDIO_SOURCE_RS="${INPUT_DIR}/${AUDIO_CHANNEL_RS}"

# Составные файловые пути для файлов в обработке
AUDIO_PROGRESS_L="${PROGRESS_DIR}/${AUDIO_CHANNEL_L}"
AUDIO_PROGRESS_R="${PROGRESS_DIR}/${AUDIO_CHANNEL_R}"
AUDIO_PROGRESS_C="${PROGRESS_DIR}/${AUDIO_CHANNEL_C}"
AUDIO_PROGRESS_LFE="${PROGRESS_DIR}/${AUDIO_CHANNEL_LFE}"
AUDIO_PROGRESS_LS="${PROGRESS_DIR}/${AUDIO_CHANNEL_LS}"
AUDIO_PROGRESS_RS="${PROGRESS_DIR}/${AUDIO_CHANNEL_RS}"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=25/(${AUDIO_TEMPO_DENOMINATOR})"

# Формирование имен выходных файлов
AUDIO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}.m4a"
AUDIO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}_proxy.ac3"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Перемещение всех аудиофайлов в директорию обработки
mv "${AUDIO_SOURCE_L}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_R}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_C}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_LFE}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_LS}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_RS}" "${PROGRESS_DIR}/"

# Обработка аудиофайлов (объединение 6 моно-каналов в 5.1)
fflite \
  -i "${AUDIO_PROGRESS_L}" \
  -i "${AUDIO_PROGRESS_R}" \
  -i "${AUDIO_PROGRESS_C}" \
  -i "${AUDIO_PROGRESS_LFE}" \
  -i "${AUDIO_PROGRESS_LS}" \
  -i "${AUDIO_PROGRESS_RS}" \
  -filter_complex "[0:a:0][1:a:0][2:a:0][3:a:0][4:a:0][5:a:0]amerge=inputs=${AUDIO_INPUT_COUNT},${AUDIO_FILTER}[audio_in]; [audio_in]asplit=2[audio][audio_pr]" \
  -map "[audio]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_OUTPUT}" \
  -map "[audio_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_OUTPUT}" && \
  
# Перемещение обработанных файлов в архив
mv "${AUDIO_PROGRESS_L}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_L}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_R}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_R}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_C}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_C}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_LFE}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_LFE}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_LS}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_LS}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_RS}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_RS}" "${ARCHIVE_OUTPUT_PATH}/" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Audio: 1 to film

```bash

#!/bin/bash

# Основные параметры обработки
INPUT_FILENAME="_____________.wav"                # Имя исходного аудиофайла
OUTPUT_BASE="______________"                      # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                             # Суффикс для версии файла
AUDIO_LANGUAGE_SUFFIX="_AUDIORUS__"               # Суффикс для идентификации аудиодорожки

# Базовые пути
HOME_ROOT="/home/pemaltynov"                      # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                      # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                               # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/_______"                       # Подпуть для редактирования
ARCHIVE_SUBPATH="IN/_______"                      # Подпуть для архивации

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                           # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                      # Знаменатель для atempo (25/__)

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                             # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                      # Уровень сжатия ALAC

# Параметры кодирования proxy аудио
AUDIO_PROXY_CODEC="ac3"                           # Кодек для proxy аудио
AUDIO_PROXY_BITRATE="128k"                        # Битрейт для proxy аудио

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"

# Составные файловые пути
AUDIO_SOURCE_PATH="${INPUT_DIR}/${INPUT_FILENAME}"          # Полный путь к исходному файлу
AUDIO_PROGRESS_PATH="${PROGRESS_DIR}/${INPUT_FILENAME}"     # Полный путь к файлу в обработке

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=25/(${AUDIO_TEMPO_DENOMINATOR})"

# Формирование имен выходных файлов
AUDIO_HD_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}.m4a"
AUDIO_PROXY_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}_proxy.ac3"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Перемещение аудиофайла в директорию обработки
mv "${AUDIO_SOURCE_PATH}" "${PROGRESS_DIR}/"

# Обработка аудиофайла
fflite -i "${AUDIO_PROGRESS_PATH}" \
  -filter_complex "[0:a:0]${AUDIO_FILTER}[audio_in]; [audio_in]asplit=2[audio][audio_pr]" \
  -map "[audio]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_OUTPUT}" \
  -map "[audio_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_OUTPUT}" && \
  
# Перемещение обработанного файла в архив
mv "${AUDIO_PROGRESS_PATH}" "${DONE_DIR}/" && mv "${DONE_DIR}/${INPUT_FILENAME}" "${ARCHIVE_OUTPUT_PATH}/" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Audio: 6 mono Trailer

```bash

#!/bin/bash

# Основные параметры обработки
OUTPUT_BASE="_TRL"                                # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                             # Суффикс для версии файла
AUDIO_LANGUAGE_SUFFIX="_AUDIORUS__"               # Суффикс для идентификации аудиодорожки

# Базовые пути
HOME_ROOT="/home/pemaltynov"                      # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                      # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                               # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/@trailers_temp"                # Подпуть для редактирования трейлеров
ARCHIVE_SUBPATH="IN/@TRAILERS"                    # Подпуть для архивации трейлеров

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                           # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                      # Знаменатель для atempo (25/__)
AUDIO_INPUT_COUNT=6                               # Количество входных аудиофайлов

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                             # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                      # Уровень сжатия ALAC

# Имена моно-аудиофайлов для трейлера (каналы 5.1)
AUDIO_CHANNEL_L="__________.L.wav"                # Левый канал
AUDIO_CHANNEL_R="__________.R.wav"                # Правый канал
AUDIO_CHANNEL_C="__________.C.wav"                # Центральный канал
AUDIO_CHANNEL_LFE="__________.Lfe.wav"            # Низкочастотный канал
AUDIO_CHANNEL_LS="__________.Ls.wav"              # Левый тыловой канал
AUDIO_CHANNEL_RS="__________.Rs.wav"              # Правый тыловой канал

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}"

# Создание путей
ARCHIVE_OUTPUT_PATH="${ARCHIVE_BASE_PATH}/_DONE/${OUTPUT_BASE}"
# Прослойка для возможного добавления субдиректорий, например: ${EDIT_BASE_PATH}/subfolder
FULL_EDIT_PATH="${EDIT_BASE_PATH}"

# Составные файловые пути для входных файлов
AUDIO_SOURCE_L="${INPUT_DIR}/${AUDIO_CHANNEL_L}"
AUDIO_SOURCE_R="${INPUT_DIR}/${AUDIO_CHANNEL_R}"
AUDIO_SOURCE_C="${INPUT_DIR}/${AUDIO_CHANNEL_C}"
AUDIO_SOURCE_LFE="${INPUT_DIR}/${AUDIO_CHANNEL_LFE}"
AUDIO_SOURCE_LS="${INPUT_DIR}/${AUDIO_CHANNEL_LS}"
AUDIO_SOURCE_RS="${INPUT_DIR}/${AUDIO_CHANNEL_RS}"

# Составные файловые пути для файлов в обработке
AUDIO_PROGRESS_L="${PROGRESS_DIR}/${AUDIO_CHANNEL_L}"
AUDIO_PROGRESS_R="${PROGRESS_DIR}/${AUDIO_CHANNEL_R}"
AUDIO_PROGRESS_C="${PROGRESS_DIR}/${AUDIO_CHANNEL_C}"
AUDIO_PROGRESS_LFE="${PROGRESS_DIR}/${AUDIO_CHANNEL_LFE}"
AUDIO_PROGRESS_LS="${PROGRESS_DIR}/${AUDIO_CHANNEL_LS}"
AUDIO_PROGRESS_RS="${PROGRESS_DIR}/${AUDIO_CHANNEL_RS}"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=25/(${AUDIO_TEMPO_DENOMINATOR})"

# Формирование имени выходного файла
AUDIO_OUTPUT="${FULL_EDIT_PATH}/${OUTPUT_BASE}${REVISION_SUFFIX}${AUDIO_LANGUAGE_SUFFIX}.m4a"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_OUTPUT_PATH}"
mkdir -p "${FULL_EDIT_PATH}"

# Перемещение всех аудиофайлов в директорию обработки
mv "${AUDIO_SOURCE_L}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_R}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_C}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_LFE}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_LS}" "${PROGRESS_DIR}/"
mv "${AUDIO_SOURCE_RS}" "${PROGRESS_DIR}/"

# Обработка аудиофайлов (объединение 6 моно-каналов в 5.1)
fflite \
  -i "${AUDIO_PROGRESS_L}" \
  -i "${AUDIO_PROGRESS_R}" \
  -i "${AUDIO_PROGRESS_C}" \
  -i "${AUDIO_PROGRESS_LFE}" \
  -i "${AUDIO_PROGRESS_LS}" \
  -i "${AUDIO_PROGRESS_RS}" \
  -filter_complex "[0:a:0][1:a:0][2:a:0][3:a:0][4:a:0][5:a:0]amerge=inputs=${AUDIO_INPUT_COUNT},${AUDIO_FILTER}[audio]" \
  -map "[audio]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_OUTPUT}" && \
  
# Перемещение обработанных файлов в архив
mv "${AUDIO_PROGRESS_L}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_L}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_R}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_R}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_C}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_C}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_LFE}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_LFE}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_LS}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_LS}" "${ARCHIVE_OUTPUT_PATH}/" && \
mv "${AUDIO_PROGRESS_RS}" "${DONE_DIR}/" && mv "${DONE_DIR}/${AUDIO_CHANNEL_RS}" "${ARCHIVE_OUTPUT_PATH}/" && \
  
# Очистка и архивация скрипта
clear
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```

# Dorama

```bash

#!/bin/bash

# Основные параметры обработки
PRIORITY=4                                         # Приоритет обработки
FILE_PREFIX="BASE_s01e"                            # Префикс для имен файлов эпизодов
FILE_SUFFIX="*.mov"                                # Суффикс для имен файлов эпизодов
OUTPUT_BASE="_______________s01"                   # Базовое имя выходных файлов
REVISION_SUFFIX="_HD"                              # Суффикс для версии файла

# Базовые пути
HOME_ROOT="/home/pemaltynov"                       # Корневая домашняя директория
MOUNT_ROOT="/mnt/pemaltynov"                       # Корневая точка монтирования
ROOT_SUBPATH="ROOT"                                # Общий подпуть для архивных путей
EDIT_SUBPATH="EDIT/_taym_media_grupp"              # Подпуть для редактирования
ARCHIVE_SUBPATH="IN/_TAYM_MEDIA_GRUPP/_DONE"       # Подпуть для архивации

# Параметры аудио
AUDIO_SAMPLE_RATE=48000                            # Частота дискретизации аудио (Гц)
AUDIO_TEMPO_DENOMINATOR="__"                       # Знаменатель для atempo (25/__)
AUDIO_LANGUAGE_SUFFIX_RUS="AUDIORUS__"             # Суффикс для русской аудиодорожки
AUDIO_LANGUAGE_SUFFIX_KOR="AUDIOKOR__"             # Суффикс для корейской аудиодорожки
AUDIO_TRACK_COUNT=2                                # Количество аудиодорожек

# Параметры видео
VIDEO_FRAMERATE=25                                 # Частота кадров видео (fps)
VIDEO_SCALE_DIVISOR=2                              # Делитель масштаба для proxy видео
VIDEO_SAR_FACTOR=2                                 # Множитель для SAR proxy видео
VIDEO_DECIMATE_CYCLE=25                            # Параметр decimate для удаления лишних кадров

# Параметры кодирования HD видео
VIDEO_HD_CODEC="libx264"                           # Кодек для HD видео
VIDEO_HD_PRESET="medium"                           # Пресет кодирования HD
VIDEO_HD_CRF=16                                    # CRF значение для HD
VIDEO_HD_PIX_FMT="yuv420p"                         # Пиксельный формат HD
VIDEO_HD_GOP_SIZE=0                                # Размер GOP (0 - только ключевые кадры)

# Параметры кодирования proxy видео
VIDEO_PROXY_CODEC="libx264"                        # Кодек для proxy видео
VIDEO_PROXY_PRESET="superfast"                     # Пресет кодирования proxy
VIDEO_PROXY_PIX_FMT="yuv420p"                      # Пиксельный формат proxy
VIDEO_PROXY_BITRATE="2000k"                        # Битрейт для proxy видео
VIDEO_PROXY_MAXRATE="2000k"                        # Максимальный битрейт proxy
VIDEO_PROXY_INTERLACED=1                           # Флаг чересстрочности proxy

# Параметры кодирования HD аудио
AUDIO_HD_CODEC="alac"                              # Кодек для HD аудио
AUDIO_HD_COMPRESSION_LEVEL=0                       # Уровень сжатия ALAC

# Параметры кодирования proxy аудио
AUDIO_PROXY_CODEC="ac3"                            # Кодек для proxy аудио
AUDIO_PROXY_BITRATE="128k"                         # Битрейт для proxy аудио

# Таймауты и задержки
ARCHIVE_DELAY="10 hours"                           # Задержка перед архивацией

# Параметры цикла обработки эпизодов
EPISODE_START=1                                    # Начальный номер эпизода
EPISODE_END=99                                     # Конечный номер эпизода
EPISODE_FORMAT="%02d"                              # Формат номера эпизода (две цифры)

# Составные пути
# Входные директории
INPUT_DIR="${HOME_ROOT}/IN"
PROGRESS_DIR="${INPUT_DIR}/_IN_PROGRESS"
DONE_DIR="${INPUT_DIR}/_DONE"
SCRIPT_ARCHIVE_DIR="${DONE_DIR}/bash"

# Редактирование и архивация
EDIT_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${EDIT_SUBPATH}/${OUTPUT_BASE}"
ARCHIVE_BASE_PATH="${MOUNT_ROOT}/${ROOT_SUBPATH}/${ARCHIVE_SUBPATH}/${OUTPUT_BASE}"

# Формирование строк фильтров
AUDIO_FILTER="aresample=${AUDIO_SAMPLE_RATE},atempo=${VIDEO_FRAMERATE}/(${AUDIO_TEMPO_DENOMINATOR})"
VIDEO_FILTER="[0:v:0]decimate=cycle=${VIDEO_DECIMATE_CYCLE},setpts=N/(${VIDEO_FRAMERATE}*TB),fps=${VIDEO_FRAMERATE},split=2[vidHD][inProxy]; [inProxy]scale=iw/${VIDEO_SCALE_DIVISOR}:ih, setsar=(1/1)*${VIDEO_SAR_FACTOR}[vidHD_pr]; [0:a:0]${AUDIO_FILTER},asplit=2[arus][arus_pr]; [0:a:1]${AUDIO_FILTER},asplit=2[aeng][aeng_pr]"

# Создание необходимых директорий
mkdir -p "${ARCHIVE_BASE_PATH}"
mkdir -p "${EDIT_BASE_PATH}"

# Обработка эпизодов в цикле
for ((EPISODE_NUM=EPISODE_START; EPISODE_NUM<=EPISODE_END; EPISODE_NUM++)); do
    # Форматирование номера эпизода (с ведущим нулем)
    EPISODE=$(printf "${EPISODE_FORMAT}" ${EPISODE_NUM})
    
    # Формирование имени входного файла
    INPUT_FILENAME="${FILE_PREFIX}${EPISODE}${FILE_SUFFIX}"
    
    # Составные файловые пути
    INPUT_SOURCE_PATH="${INPUT_DIR}/${INPUT_FILENAME}"
    INPUT_PROGRESS_PATH="${PROGRESS_DIR}/${INPUT_FILENAME}"
    
    # Формирование имен выходных файлов
    VIDEO_HD_OUTPUT="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}${REVISION_SUFFIX}.mp4"
    VIDEO_PROXY_OUTPUT="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}${REVISION_SUFFIX}_proxy.mp4"
    AUDIO_HD_RUS_OUTPUT="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}_${AUDIO_LANGUAGE_SUFFIX_RUS}.m4a"
    AUDIO_PROXY_RUS_OUTPUT="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}_${AUDIO_LANGUAGE_SUFFIX_RUS}_proxy.ac3"
    AUDIO_HD_KOR_OUTPUT="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}_${AUDIO_LANGUAGE_SUFFIX_KOR}.m4a"
    AUDIO_PROXY_KOR_OUTPUT="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}_${AUDIO_LANGUAGE_SUFFIX_KOR}_proxy.ac3"
    READY_FILE_PATH="${EDIT_BASE_PATH}/${OUTPUT_BASE}_${EPISODE}.ready"
    
    # Очистка экрана и перемещение входного файла
    clear
    mv "${INPUT_SOURCE_PATH}" "${PROGRESS_DIR}/"
    
    # Обработка медиафайла
    fflite -n -r ${VIDEO_FRAMERATE} -i "${INPUT_PROGRESS_PATH}" \
      -filter_complex "${VIDEO_FILTER}" \
      -map "[vidHD]" -c:v ${VIDEO_HD_CODEC} -preset ${VIDEO_HD_PRESET} -crf ${VIDEO_HD_CRF} -pix_fmt ${VIDEO_HD_PIX_FMT} -g ${VIDEO_HD_GOP_SIZE} -map_metadata -1 -map_chapters -1 "${VIDEO_HD_OUTPUT}" \
      -map "[vidHD_pr]" -c:v ${VIDEO_PROXY_CODEC} -x264opts interlaced=${VIDEO_PROXY_INTERLACED} -preset ${VIDEO_PROXY_PRESET} -pix_fmt ${VIDEO_PROXY_PIX_FMT} -b:v ${VIDEO_PROXY_BITRATE} -maxrate ${VIDEO_PROXY_MAXRATE} -map_metadata -1 -map_chapters -1 "${VIDEO_PROXY_OUTPUT}" \
      -map "[arus]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_RUS_OUTPUT}" \
      -map "[arus_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_RUS_OUTPUT}" \
      -map "[aeng]" -c:a ${AUDIO_HD_CODEC} -compression_level ${AUDIO_HD_COMPRESSION_LEVEL} -map_metadata -1 -map_chapters -1 "${AUDIO_HD_KOR_OUTPUT}" \
      -map "[aeng_pr]" -c:a ${AUDIO_PROXY_CODEC} -b:a ${AUDIO_PROXY_BITRATE} "${AUDIO_PROXY_KOR_OUTPUT}" && \
      
    # Создание файла готовности
    touch "${READY_FILE_PATH}" && \
      
    # Перемещение обработанного файла в временную директорию
    mv "${INPUT_PROGRESS_PATH}" "${DONE_DIR}/" && \
      
    # Отложенное перемещение файла в архив
    at now + ${ARCHIVE_DELAY} <<< "mv ${DONE_DIR}/${INPUT_FILENAME} ${ARCHIVE_BASE_PATH}" && \
      
    # Очистка экрана
    clear
done

# Архивация скрипта
mv "$0" "${SCRIPT_ARCHIVE_DIR}/"
```