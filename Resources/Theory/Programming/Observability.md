---
updated_at: 2026-02-12T13:58:00.219+10:00
---
**Наблюдаемость** ({{Observability|observability}}) — это инженерная дисциплина и свойство системы, характеризующее, насколько полно внутреннее состояние системы можно определить по данным, которые она производит во внешнюю среду: [[Log|логам]], [[Metric|метрикам]] и [[TRACE|трассировкам]]. Система считается наблюдаемой, если по её выходным сигналам можно понять причины наблюдаемого поведения без необходимости выпускать новый код или перезапускать процессы.

Термин заимствован из теории управления, где система называется наблюдаемой, если её внутренние состояния могут быть восстановлены по измерениям выходов.

### Назначение
Наблюдаемость стала критически важной в условиях распределённых, динамических архитектур ([[Microservices|микросервисы]], контейнеры, облачные среды), где традиционные методы мониторинга (проверка «жив/мёртв», фиксированные пороги) перестали быть достаточными:

*   **Исследование неизвестного**. Мониторинг отвечает на известные вопросы («Какая частота ошибок?», «Достаточно ли памяти?»). Наблюдаемость позволяет отвечать на вопросы, которые заранее не формулировались («Почему именно эти запросы конкретного пользователя завершаются таймаутом?»).
*   **Диагностика распределённых сбоев**. В сложных системах с множеством взаимодействующих сервисов необходимо восстанавливать полную картину прохождения запроса через все компоненты.
*   **Снижение среднего времени обнаружения (MTTD) и восстановления (MTTR)**. Быстрое определение первопричины инцидента напрямую зависит от глубины и связности данных.
*   **Понимание поведения в production**. Тестовые среды не могут воспроизвести всю сложность реальной эксплуатации; наблюдаемость позволяет понимать систему в её естественной среде обитания.

### Ограничения
Внедрение наблюдаемости связано с рядом ограничений и рисков:

1.  **Объём данных**. Сбор всех возможных сигналов с высокой детализацией порождает объёмы данных, которые невозможно хранить и обрабатывать экономически оправданно. Требуется стратегия фильтрации, агрегации и ротации.
2.  **Стоимость хранения и передачи**. Высокоразрешающие метрики и полные трассировки каждого запроса требуют значительных ресурсов и затрат, особенно в облачных моделях оплаты за объём.
3.  **Инструментальная нагрузка**. Внесение кода для сбора наблюдаемости (инструментирование) увеличивает сложность разработки, время выполнения и объём кодовой базы.
4.  **Сложность корреляции**. Разрозненные данные из разных источников (логи, метрики, трассировки) трудно связывать между собой без внедрения унифицированных идентификаторов и стандартов.
5.  **Когнитивная нагрузка**. Освоение инструментов наблюдаемости (PromQL, LogQL, язык запросов трассировок) требует обучения и опыта. Без квалифицированных специалистов собранные данные остаются невостребованными.
6.  **Ложные срабатывания**. Недостаточно точная настройка оповещений приводит к усталости от сигналов и игнорированию реальных инцидентов.

### Сложившиеся практики
Индустрия выработала согласованный подход к построению наблюдаемых систем, основанный на трёх столпах и множестве вспомогательных методик:

1.  **[[Three Pillars of Observability|Три столпа наблюдаемости]]**:
    *   **[[Metric|Метрики]]** — числовые агрегированные значения за интервал времени (количество запросов в секунду, загрузка CPU, 99-й перцентиль задержки). Оптимальны для мониторинга трендов и пороговой сигнализации.
    *   **[[Log|Логи]]** — структурированные записи дискретных событий, содержащие контекстную информацию. Незаменимы для детального анализа конкретных инцидентов.
    *   **[[TRACE|Трассировки]]** — представление пути запроса через распределённую систему, состоящее из иерархически связанных промежутков ([[Span|спанов]]). Позволяют увидеть, сколько времени занял каждый вызов и где возникла задержка.

2.  **[[Context Propagation|Контекстная передача]] (Context Propagation)**. Для связывания трассировок, логов и метрик, относящихся к одному запросу, внедряются уникальные идентификаторы ([[Trace ID|trace id]], [[Span ID|span id]]). Эти идентификаторы пробрасываются через все сервисы и включаются в каждый лог-запись и метрику, что обеспечивает корреляцию.

3.  **[[OpenTelemetry]] как стандарт де-факто**. OpenTelemetry (OTel) — независимый от поставщиков фреймворк для инструментирования, сбора и передачи телеметрии. Предоставляет единые API, SDK и протоколы, что устраняет привязку к конкретным вендорам и упрощает миграцию.

4.  **[[eBPF]] и безынструментная наблюдаемость**. Использование технологий ядра Linux (eBPF) для сбора данных о работе системы без модификации прикладного кода. Позволяет наблюдать за работой legacy-приложений и инфраструктурных компонентов.

5.  **Service-Level Indicators (SLI), Objectives (SLO), Agreements (SLA)**. Определение ключевых показателей качества обслуживания (доступность, задержка, скорость успешных ответов) и целевых значений. Оповещения строятся вокруг рисков нарушения SLO, а не вокруг каждого аномального всплеска.

6.  **Высококардинальные данные (High Cardinality)**. Современные системы наблюдаемости (Prometheus с Thanos, VictoriaMetrics, Grafana Mimir, Honeycomb) способны эффективно работать с метриками, имеющими множество уникальных значений тегов (user_id, order_id, instance). Это позволяет исследовать данные в произвольных разрезах.

7.  **Культура «исследования, а не только сигнализации»**. Наблюдаемость не сводится к дашбордам и оповещениям. Она предполагает наличие инструментов для ad-hoc-запросов к телеметрии, позволяющих разработчикам самостоятельно расследовать инциденты и находить узкие места.

8.  **Единая платформа наблюдаемости**. Интеграция метрик, логов и трассировок в одном интерфейсе (Grafana, Datadog, New Relic). Возможность переходить от дашборда метрик к соответствующим логам и от лога к трассировке без смены контекста.

9.  **Автоматическое инструментирование**. Библиотеки и агенты, автоматически перехватывающие сетевые вызовы, работу с базами данных, HTTP-запросы и т.п., без необходимости писать код сбора телеметрии вручную. Снижает порог внедрения и обеспечивает единообразие.

10. **Анализ причинности**. Продвинутые инструменты используют машинное обучение для выявления статистически значимых корреляций между изменениями телеметрии и инцидентами, ускоряя поиск первопричин.

11. **Редизайн приложений для наблюдаемости**. Проектирование сервисов с учётом необходимости их наблюдения: явное добавление идентификаторов запросов, структурированных логов, метрик внутренних очередей и кэшей.

Таким образом, наблюдаемость превратилась из дополнительной опции в обязательное качество производственных систем. Она смещает фокус от пассивного наблюдения за известными метриками к активному исследованию поведения системы в ответ на неизвестные сценарии. Внедрение наблюдаемости требует не только выбора инструментов, но и изменения мышления: каждая команда рассматривает телеметрию как неотъемлемую часть поставляемого программного продукта, такую же важную, как и функциональный код.